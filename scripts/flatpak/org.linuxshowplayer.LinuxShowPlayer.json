{
    "app-id": "org.linuxshowplayer.LinuxShowPlayer",
    "runtime": "org.kde.Platform",
    "runtime-version": "6.7",
    "sdk": "org.kde.Sdk",
    "base": "com.riverbankcomputing.PyQt.BaseApp",
    "base-version": "6.7",
    "command": "linux-show-player",
    "rename-icon": "linuxshowplayer",
    "finish-args": [
        "--share=network",
        "--share=ipc",
        "--socket=wayland",
        "--socket=fallback-x11",
        "--socket=pulseaudio",
        "--filesystem=xdg-run/pipewire-0",
        "--filesystem=home",
        "--device=all",
        "--talk-name=org.freedesktop.Flatpak"
    ],
    "cleanup-commands": [
        "/app/cleanup-BaseApp.sh"
    ],
    "cleanup": [
        "*.la",
        "*.a",
        "/include",
        "/lib/pkgconfig",
        "/share/man"
    ],
    "build-options": {
        "env": [
            "BASEAPP_REMOVE_WEBENGINE=1"
        ]
    },
    "modules": [
        {
            "name": "RtMidi",
            "config-opts": [
                "--with-jack",
                "--with-alsa"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/thestk/rtmidi.git",
                    "tag": "6.0.0",
                    "commit": "1e5b49925aa60065db52de44c366d446a902547b"
                }
            ]
        },
        {
            "name": "python-rtmidi",
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/dd/ee/0f91965dcc471714c69df21e5ca3d94dc81411b7dee2d31ff1184bea07c9/python_rtmidi-1.5.8.tar.gz",
                    "sha256": "7f9ade68b068ae09000ecb562ae9521da3a234361ad5449e83fc734544d004fa"
                }
            ]
        },
        {
            "name": "python-alsa",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-index --no-build-isolation --prefix=\"${FLATPAK_DEST}\" ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.alsa-project.org/files/pub/pyalsa/pyalsa-1.2.12.tar.bz2",
                    "sha256": "8abeaf41e5f48f617a52d1078932da89ab303d4a1d8f9919f947bdb1b7d03f50"
                }
            ]
        },
        {
            "name": "poetry-core",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-index --no-build-isolation --find-links=\"file://${PWD}\" --prefix=\"${FLATPAK_DEST}\" poetry-core"
            ],
            "cleanup": [
                "*"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/ce/a3/f1fd35e3863b50713642d8745ba28e12e7cb8a6a28beab064ff1e8455db4/poetry_core-2.1.2-py3-none-any.whl",
                    "sha256": "ecb1e8f7d4f071a21cd0feb8c19bd1aec80de6fb0e82aa9d809a591e544431b4"
                }
            ]
        },
        "gstreamer-modules.json",
        "python-modules.json",
        "numpy-modules.json",
        {
            "name": "linux-show-player",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-deps --no-build-isolation --prefix=\"${FLATPAK_DEST}\" .",
                "install -Dm644 dist/linuxshowplayer.desktop ${FLATPAK_DEST}/share/applications/${FLATPAK_ID}.desktop",
                "install -Dm644 dist/linuxshowplayer.xml /app/share/mime/packages/${FLATPAK_ID}.xml",
                "install -Dm644 dist/linuxshowplayer.metainfo.xml /app/share/metainfo/${FLATPAK_ID}.metainfo.xml",
                "install -Dm644 dist/linuxshowplayer.png /app/share/icons/hicolor/512x512/apps/linuxshowplayer.png"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/FrancescoCeruti/linux-show-player.git",
                    "branch": "master"
                }
            ]
        }
    ]
}